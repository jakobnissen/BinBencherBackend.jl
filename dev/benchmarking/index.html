<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Benchmarking · BinBencher.jl</title><meta name="title" content="Benchmarking · BinBencher.jl"/><meta property="og:title" content="Benchmarking · BinBencher.jl"/><meta property="twitter:title" content="Benchmarking · BinBencher.jl"/><meta name="description" content="Documentation for BinBencher.jl."/><meta property="og:description" content="Documentation for BinBencher.jl."/><meta property="twitter:description" content="Documentation for BinBencher.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">BinBencher.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../nomenclariture/">Nomenclariture</a></li><li><a class="tocitem" href="../input_files/">Input files</a></li><li><span class="tocitem">CLI interface</span><ul><li><a class="tocitem" href="../cli_overview/">Overview</a></li><li class="is-active"><a class="tocitem" href>Benchmarking</a></li><li><a class="tocitem" href="../make_ref/">Making a reference</a></li></ul></li><li><span class="tocitem">Backend package</span><ul><li><a class="tocitem" href="../backend_overview/">Overview</a></li><li><a class="tocitem" href="../walkthrough/">Walkthrough</a></li><li><a class="tocitem" href="../reference/">API Reference</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">CLI interface</a></li><li class="is-active"><a href>Benchmarking</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Benchmarking</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/jakobnissen/BinBencherBackend.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/jakobnissen/BinBencherBackend.jl/blob/master/docs/src/benchmarking.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="benchmarking"><a class="docs-heading-anchor" href="#benchmarking">Benchmarking a binning</a><a id="benchmarking-1"></a><a class="docs-heading-anchor-permalink" href="#benchmarking" title="Permalink"></a></h1><p>Benchmarking is done with by running <code>binbench bench</code> from command line. You will need the following two input files (see <a href="../input_files/#input_files">the section &#39;input files&#39;</a> for more info):</p><ol><li>A reference JSON file.</li><li>Your bins in a two-column TSV file.</li></ol><p>Benchmarking is run with the following command:</p><pre><code class="language-shell hljs">$ binbench bench out_dir reference.json binning.tsv</code></pre><h3 id="Command-line-arguments"><a class="docs-heading-anchor" href="#Command-line-arguments">Command line arguments</a><a id="Command-line-arguments-1"></a><a class="docs-heading-anchor-permalink" href="#Command-line-arguments" title="Permalink"></a></h3><ul><li><code>-s --sep</code>: Set the binsplit separator to a string (by default, no separator is passed). When a separator is passed, every sequence is assumed to be named according to the format <code>&lt;samplename&gt;&lt;separator&gt;&lt;sequencename&gt;</code>, where:<ul><li><code>&lt;samplename&gt;</code> uniquely identifies the sample of origin of the sequence</li><li><code>&lt;separator&gt;</code> is equal to the binsplit separator</li><li>The separator does not occur in the samplename</li><li><code>&lt;sequencename&gt;</code> is an identifier that uniquely identifies a sequence within a sample.</li></ul>BinBencher will then split every input bin by their sample as given by this format. All bin filters will be applied after this binsplitting procedure.</li><li><code>--minsize</code>: Remove bins where the sum of sequence lengths is smaller than this number</li><li><code>--minseqs</code>: Remove bins with fewer sequences than this number</li><li><code>--keep-flags</code>: See <code>--remove_flags</code>. Keep only genomes with all these flags set.</li><li><code>--remove-flags</code>: Every genome in the reference has a set of boolean attributes, e.g. <code>virus</code>, <code>organism</code>, <code>plasmid</code> etc. This argument takes a comma-separated list of flags, then removes every genome that matches the flag. E.g. <code>--remove-flags organism,virus</code>, all genomes that are flagged with <em>either</em> <code>organism</code> or <code>virus</code> is removed.</li><li><code>--recalls</code>: Comma-separated list of recall thresholds to use when computing the matrices of the binning</li><li><code>--precisions</code>: See <code>--recalls</code></li><li><code>--intersect</code>: Allow sequences to be present in multiple bins. Without this flag, BinBencher will throw an error if any sequences is detected in multiple bins.</li></ul><h3 id="Output-files"><a class="docs-heading-anchor" href="#Output-files">Output files</a><a id="Output-files-1"></a><a class="docs-heading-anchor-permalink" href="#Output-files" title="Permalink"></a></h3><ul><li><code>log.txt</code>: The log file. Look here for errors.</li><li><code>stats.json</code>: Some statistics on the overall binning, such as number of bins, number of sequences, and summary statistics of the bins.</li><li><code>bins.json.gz</code>: This file contains <em>assembly recall</em>, <em>genomic recall</em> and <em>precision</em> for every bin, with every genome and clade that intersects with the bin (i.e. have nonzero recall).</li><li><code>recovery.json</code>: This JSON file contains the keys <code>&quot;precisions&quot;</code> and <code>&quot;recalls&quot;</code> with the precision/recall thresholds used when binning. It then contains the four arrays <code>bins_genomic_recall</code>, <code>genomes_genomic_recall</code>, <code>bins_asm_recall</code> and <code>genomes_asm_recall</code>. Each of these arrays contain N matrices, one per taxonomic rank of the reference, with the first matrix being the genomes and the last matrix the top taxonomic rank. Each matrix has one row per precision threshold and one column per recall threshold. It then gives the number of genomes/bins reconstructed at the given precision/recall thresholds. The <code>bins_*</code> matrices gives the number of bins passing the threshold, whereas the <code>genomes_</code> gives the number of genomes for which at least 1 bin passes the threshold with that given genome. The <code>*_genomic_*</code> matrices counts <em>genomic recall</em>, whereas the <code>*_asm_*</code> matrices count <em>asm recall</em>.</li></ul><h3 id="Benchmarking-multiple-binnings-in-one-go"><a class="docs-heading-anchor" href="#Benchmarking-multiple-binnings-in-one-go">Benchmarking multiple binnings in one go</a><a id="Benchmarking-multiple-binnings-in-one-go-1"></a><a class="docs-heading-anchor-permalink" href="#Benchmarking-multiple-binnings-in-one-go" title="Permalink"></a></h3><p>If you have several binnings, it&#39;s faster to benchmark them together, as the reference only needs to be loaded once. This can be done like so</p><pre><code class="language-shell hljs">$ binbench bench out_dir reference.json bins1=binning_1.tsv bins2=binning_2.tsv</code></pre><p>Here, <code>out_dir</code> will be populated by the log file and one sub-directory per binning, here called <code>bin1</code> and <code>bins2</code>. The sub-directories contain the same content as the output directory when running BinBencher with a single binning, except it does not contain the log file.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../cli_overview/">« Overview</a><a class="docs-footer-nextpage" href="../make_ref/">Making a reference »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Tuesday 24 September 2024 09:32">Tuesday 24 September 2024</span>. Using Julia version 1.10.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
